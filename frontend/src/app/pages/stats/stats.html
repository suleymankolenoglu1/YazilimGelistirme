<div class="stats-container">
  <h1>GÃ¶rev Ä°statistikleri</h1>

  <!-- DAÄ°RE GRAFÄ°K -->
  <div *ngIf="stats.total > 0; else noTasks" class="pie-chart-container">
    <div
      class="pie-chart"
      [style.--p-done]="getPercentage(stats.done)"
      [style.--p-pending]="getPercentage(stats.pending)"
      [style.--p-overdue]="getPercentage(stats.overdue)"
    >
      <!-- GrafiÄŸin ortasÄ±ndaki yazÄ± -->
      <div class="pie-center">
        <span class="count">{{ stats.total }}</span>
        <span class="label">Toplam GÃ¶rev</span>
      </div>
    </div>

    <!-- GrafiÄŸin aÃ§Ä±klamasÄ± (Legend) -->
    <ul class="pie-legend">
      <li class="legend-item done">
        <span class="dot"></span>
        Tamamlanan: ({{ stats.done }}) - {{ getPercentage(stats.done) | number : '1.0-1' }}%
      </li>

      <li class="legend-item pending">
        <span class="dot"></span>
        Bekleyen: ({{ stats.pending }}) - {{ getPercentage(stats.pending) | number : '1.0-1' }}%
      </li>

      <li class="legend-item overdue">
        <span class="dot"></span>
        SÃ¼resi GeÃ§miÅŸ: ({{ stats.overdue }}) -
        {{ getPercentage(stats.overdue) | number : '1.0-1' }}%
      </li>
    </ul>
  </div>

  <ng-template #noTasks>
    <div class="no-tasks-message">
      <h2>HenÃ¼z hiÃ§ gÃ¶rev eklemediniz.</h2>
      <p>Ä°statistikleri gÃ¶rmek iÃ§in <a routerLink="/add">yeni bir gÃ¶rev ekleyin</a>.</p>
    </div>
  </ng-template>

  <!-- KATEGORÄ° BAZLI Ä°STATÄ°STÄ°KLER -->
  <div *ngIf="categoryStats.length > 0" class="category-stats-section">
    <h2>ğŸ“Š Kategorilere GÃ¶re DaÄŸÄ±lÄ±m</h2>
    
    <div class="category-cards">
      <div *ngFor="let cat of categoryStats" class="category-card">
        <div class="category-header">
          <span class="category-name">{{ cat.category }}</span>
          <span class="category-total">{{ cat.total }} gÃ¶rev</span>
        </div>
        
        <!-- Progress bar -->
        <div class="progress-bar-container">
          <div class="progress-bar" 
               [style.width.%]="getCategoryCompletionPercent(cat)"
               [class.full]="cat.completed === cat.total">
          </div>
        </div>
        
        <div class="category-details">
          <span class="completed"><span class="icon">&#10004;</span> {{ cat.completed }}</span>
          <span class="pending"><span class="icon">&#9203;</span> {{ cat.pending }}</span>
          <span class="overdue"><span class="icon">&#10006;</span> {{ cat.overdue }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
