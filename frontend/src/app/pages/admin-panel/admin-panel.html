<div class="admin-container">
  <h1>A - A - Admin Panel</h1>

  <div class="admin-content">
    <!-- KullanÄ±cÄ± Listesi -->
    <div class="users-section">
      <h2>KullanÄ±cÄ±lar</h2>
      <ul class="user-list">
        <li 
          *ngFor="let user of users" 
          (click)="selectUser(user)"
          [class.selected]="selectedUser?.id === user.id"
          [class.admin-user]="user.role === 'Admin'"
        >
          <span class="user-icon">{{ user.role === 'Admin' ? 'ğŸ‘‘' : 'ğŸ‘¤' }}</span>
          <div class="user-info">
            <strong>{{ user.fullName }}</strong>
            <small>{{ user.username }} â€¢ {{ user.email }}</small>
          </div>
          <span class="role-badge" [class.admin]="user.role === 'Admin'">
            {{ user.role }}
          </span>
        </li>
      </ul>
    </div>

    <!-- SeÃ§ili KullanÄ±cÄ±nÄ±n GÃ¶revleri -->
    <div class="tasks-section" *ngIf="selectedUser">
      <div class="tasks-header">
        <h2>{{ selectedUser.fullName }} - GÃ¶revleri</h2>
        <button class="assign-btn" (click)="toggleAssignForm()">
          {{ showAssignForm ? 'âœ• Ä°ptal' : '+ GÃ¶rev Ata' }}
        </button>
      </div>

      <!-- GÃ¶rev Atama Formu -->
      <div class="assign-form" *ngIf="showAssignForm">
        <h3>Yeni GÃ¶rev Ata</h3>
        <div class="form-group">
          <label>BaÅŸlÄ±k *</label>
          <input type="text" [(ngModel)]="newTask.title" placeholder="GÃ¶rev baÅŸlÄ±ÄŸÄ±">
        </div>
        <div class="form-group">
          <label>AÃ§Ä±klama</label>
          <textarea [(ngModel)]="newTask.description" placeholder="AÃ§Ä±klama"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Kategori</label>
            <select [(ngModel)]="newTask.category">
              <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
            </select>
          </div>
          <div class="form-group">
            <label>Tarih</label>
            <input type="date" [(ngModel)]="newTask.dueDate">
          </div>
          <div class="form-group">
            <label>Saat</label>
            <input type="time" [(ngModel)]="newTask.dueTime">
          </div>
        </div>
        <button class="submit-btn" (click)="assignTask()">GÃ¶revi Ata</button>
      </div>

      <!-- GÃ¶rev Listesi -->
      <ul class="task-list" *ngIf="userTasks.length > 0">
        <li *ngFor="let task of userTasks" [ngClass]="getTaskColorClass(task)">
          <div class="task-info">
            <strong>{{ task.title }}</strong>
            <span class="category-badge">{{ task.category }}</span>
            <p>{{ task.description }}</p>
            <small>{{ task.dueDate | date:'dd.MM.yyyy' }} {{ task.dueTime?.slice(0,5) }}</small>
          </div>
          <span class="status-badge">{{ task.status === 'completed' ? 'âœ…' : (isOverdue(task) ? 'âŒ' : 'â³') }}</span>
        </li>
      </ul>

      <div class="no-tasks" *ngIf="userTasks.length === 0 && !showAssignForm">
        <p>Bu kullanÄ±cÄ±nÄ±n henÃ¼z gÃ¶revi yok.</p>
      </div>
    </div>

    <!-- KullanÄ±cÄ± SeÃ§ilmedi -->
    <div class="no-selection" *ngIf="!selectedUser">
      <p>ğŸ‘ˆ GÃ¶revlerini gÃ¶rmek iÃ§in bir kullanÄ±cÄ± seÃ§in</p>
    </div>
  </div>
</div>